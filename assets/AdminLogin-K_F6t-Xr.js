import{e as v,_ as S,m as x,f as y,c as k,a as s,b as e,w as a,r as h,o as C,d as _,n as u,t as p,g as L,v as V}from"./index-n6NVTvFu.js";const g=v("alertStore",{state:()=>({iconSinpleStyle:{customClass:{confirmButton:"btn py-2 btn-gray-1",title:"h4 mb-0",icon:"small mb-0",container:"border-4",timer:3e3,timerProgressBar:!0},buttonsStyling:!1}}),actions:{iconSinpleContent(c,d){return{icon:c,title:d,confirmButtonText:"確認"}}}}),$={data(){return{url:"",path:"",isLoading:!1}},methods:{...x(g,["iconSinpleContent"]),login(c){const{username:d,password:f}=c,b={username:d,password:f},t=this.$swal.mixin(this.iconSinpleStyle);this.isLoading=!0,this.axios.post(`${this.url}/admin/signin`,b).then(n=>{const o=n.data;if(o.error)switch(o.error.code){case"auth/user-not-found":t.fire(this.iconSinpleContent("error","查無此帳號"));break;case"auth/wrong-password":t.fire(this.iconSinpleContent("error","密碼輸入錯誤"));break;default:t.fire(this.iconSinpleContent("error","登入失敗，請洽客服"));break}else{const{token:i,expired:l}=o;document.cookie=`adminToken=${i}; expires=${new Date(l)};`,t.fire({...this.iconSinpleContent("success",o.message),didClose:()=>{this.$router.replace("/admin")}})}this.isLoading=!1}).catch(n=>{t.fire(this.iconSinpleContent("error",`錯誤${n.response.status}，請洽客服`)),this.isLoading=!1})}},mounted(){this.url="https://vue3-course-api.hexschool.io/v2",this.path="gymplus"},computed:{...y(g,["iconSinpleStyle"])}},B={class:"bg-light",style:{"min-height":"100vh"}},P={class:"navbar navbar-light bg-white"},A={class:"container"},F=s("h1",{class:"logo mb-0",style:{width:"105px",height:"60px"}},"GYMPlus",-1),q={class:"container pb-6"},D=s("h2",{class:"text-center my-7"},[s("span",{class:"text-primary"},"管理者"),s("span",null,"登入")],-1),E={class:"row justify-content-center"},M={class:"row align-items-center mb-4 gx-3"},N=s("label",{class:"col-2 form-label",for:"email"},"帳號",-1),T={class:"col-10"},j={class:"col-10 ms-auto mt-1 text-danger"},z={class:"row align-items-center mb-4 gx-3"},G=s("label",{class:"col-2 form-label",for:"password"},"密碼",-1),Y={class:"col-10"},H={class:"col-10 ms-auto mt-1 text-danger"},I={class:"row align-items-center mb-6 gx-3"},J=s("label",{class:"col-2 form-label",for:"passwordCheck"},"確認密碼",-1),K={class:"col-10"},O={class:"col-10 ms-auto mt-1 text-danger"},Q=["disabled"],R={class:"line-loading-loop bg-gray-3"};function U(c,d,f,b,t,n){const o=h("router-link"),i=h("VField"),l=h("ErrorMessage"),w=h("VForm");return C(),k("div",B,[s("nav",P,[s("div",A,[e(o,{to:"/"},{default:a(()=>[F]),_:1}),e(o,{to:"/",class:"fw-medium py-3"},{default:a(()=>[_("返回前台")]),_:1})])]),s("div",q,[D,s("div",E,[e(w,{class:"col-11 col-md-9 col-lg-6",onSubmit:n.login},{default:a(({errors:m})=>[s("div",M,[N,s("div",T,[e(i,{name:"username",rules:"email|required",type:"email",class:u(["form-control border-0",{"is-invalid":m.username}]),placeholder:"請輸入管理員信箱",id:"email"},null,8,["class"])]),e(l,{name:"username",class:"invalid-feedback"},{default:a(({message:r})=>[s("small",j,p(r.replace("username","帳號")),1)]),_:1})]),s("div",z,[G,s("div",Y,[e(i,{name:"password",rules:"required",type:"password",class:u(["form-control border-0",{"is-invalid":m.password}]),placeholder:"請輸入密碼",id:"password"},null,8,["class"])]),e(l,{name:"password",class:"invalid-feedback"},{default:a(({message:r})=>[s("small",H,p(r.replace("password","密碼")),1)]),_:1})]),s("div",I,[J,_(" "+p(m.valus)+" ",1),s("div",K,[e(i,{name:"checkPassword",rules:"required|confirmed:@password",type:"password",class:u(["form-control border-0",{"is-invalid":m.checkPassword}]),placeholder:"請再次輸入密碼",id:"passwordCheck"},null,8,["class"])]),e(l,{name:"checkPassword",class:"invalid-feedback"},{default:a(({message:r})=>[s("small",O,p(r.replace("checkPassword","密碼")),1)]),_:1})]),s("button",{type:"submit",class:"btn btn-primary w-100 mb-6",disabled:t.isLoading},[_(" 登入 "),L(s("span",R,null,512),[[V,t.isLoading]])],8,Q)]),_:1},8,["onSubmit"])])])])}const X=S($,[["render",U]]);export{X as default};
